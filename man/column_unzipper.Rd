% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/table_tools.R
\name{column_unzipper}
\alias{column_unzipper}
\title{Column unzipper}
\usage{
column_unzipper(df, name, sep = "; ", drop_original = FALSE, as_logical = TRUE)
}
\arguments{
\item{df}{A data frame or tibble.}

\item{name}{Column to separate. Can be a string (e.g., `"tags"`) or a bare
column name (e.g., `tags`).}

\item{sep}{A string delimiter used to separate values within the column.
Defaults to `"; "` (common in REDCap-style exports).}

\item{drop_original}{Logical; if `TRUE`, the original delimited column is
dropped from the result. Defaults to `FALSE`.}

\item{as_logical}{Logical; if `TRUE`, output indicators are `TRUE/FALSE`.
If `FALSE`, outputs are `1/0` suitable for summation. Defaults to `TRUE`.}
}
\value{
A tibble with all original identifier columns preserved and one additional
column per unique category found in `name`. New columns are logicals
(`TRUE/FALSE`) or integers (`1/0`) depending on `as_logical`.
}
\description{
Split a delimited “multi-value” column into multiple boolean indicator
columns (one per unique category), optionally retaining the original column.
Handles trimming, `NA`/empty values, and duplicate categories per row.
}
\details{
- Rows are expanded with `tidyr::separate_rows()`, values are `trimws()`’d,
  and empty/`NA`/`"NA"` entries are dropped.
- Duplicates per id+category are removed before widening, preventing
  `pivot_wider()` list-cols and warnings about non-unique values.
- Missing combinations are filled with `0` (or `FALSE` when `as_logical=TRUE`).
}
\examples{
\dontrun{
library(dplyr)

df <- tibble::tibble(
  study_id = c("1001","1002","1003"),
  facilitycode = c("HCM","UMD","UMD"),
  ineligibility_reasons = c(
    "Does Not Meet Criteria",
    "Not Enrolled Within Time; Does Not Meet Criteria",
    "Unable to Consent; Maintain Followup"
  )
)

# Logical indicators (default)
out_logical <- column_unzipper(
  df, name = ineligibility_reasons, sep = "; ", as_logical = TRUE
)

# Numeric indicators (1/0), dropping original column
out_numeric <- column_unzipper(
  df, name = "ineligibility_reasons", sep = "; ",
  drop_original = TRUE, as_logical = FALSE
)
}

}
